<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name='description' content='Bienvenu sur mon blog Tech, Cloud, et DevOps'>
  
  <meta prefix="go: http://ogp.me/ns#" property='og:title' content='Deploiement de la suite prometheus grafana sous Kubernetes' />
  <title>Deploiement de la suite prometheus grafana sous Kubernetes</title>
  
  <meta prefix="go: http://ogp.me/ns#" property="og:site_name" content="Matthieu Petite Blog">
  <meta prefix="go: http://ogp.me/ns#" property='og:description' content='Superviser le cloud est un enjeu majeur lorsque l on décide d y déployer une application métier, Prometheus, Grafana s imposent comme des outils essentiels pour répondre aux enjeux de monitoring. Voici comment les déployer dans un environnement Kubernetes.'/>
  <meta prefix="go: http://ogp.me/ns#" property="og:type" content="article">
  
  <meta prefix="go: http://ogp.me/ns#" property="og:url" content="https://matthieupetite.github.io//blog/2021/03/31/deploiement-prometheus-grafana-kubernetes/">
  
  <meta prefix="go: http://ogp.me/ns#" property="og:pagetype" content="post">
  
    <meta name="image" property="og:image" content="https://matthieupetite.github.io/blog/images/post/2021/03/2021-03-31-deploiement-prometheus-grafana-kubernetes.png">
  

  <meta name="author" content="Matthieu PETITE">
  <link rel="canonical" href="https://matthieupetite.github.io//blog/2021/03/31/deploiement-prometheus-grafana-kubernetes/">
  <link rel="icon" href="https://matthieupetite.github.io/blog/favicon.ico" />
  <link rel="alternate" type="application/rss+xml" title="" href="/blog/feed.xml">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
  <!-- Ionicons -->
  <link href="https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css" rel="stylesheet">

  <style>
  
  .text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.vertical-center{display:flex;align-items:center;justify-content:center}.show{display:block}.hide{display:none}.invisible{visibility:hidden}.float-left{float:left}.float-right{float:right}.no-padding{padding:0}.no-margin{margin:0}.list-reset{list-style-type:none;margin:0;padding:0}.clearfix::after,.clearfix ::before{content:"";display:table;clear:both}.screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,dl,dd,ol,ul,fieldset,legend,figure,hr{margin:0;padding:0}li>ul,li>ol{margin-bottom:0}table{border-collapse:collapse;border-spacing:0}h1,h2,h3,h4,h5,h6,ul,ol,dl,blockquote,p,address,hr,table,fieldset,figure,pre{margin-bottom:20px}ul,ol,dd{margin-left:20px}.highlight{background:#f8f8f8}.highlighter-rouge .highlight{background:#eef}.highlight .c{color:#998;font-style:italic}.highlight .err{color:#a61717;background-color:#e3d2d2}.highlight .k{font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:#998;font-style:italic}.highlight .cp{color:#999;font-weight:bold}.highlight .c1{color:#998;font-style:italic}.highlight .cs{color:#999;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gr{color:#a00}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{font-weight:bold}.highlight .kd{font-weight:bold}.highlight .kp{font-weight:bold}.highlight .kr{font-weight:bold}.highlight .kt{color:#458;font-weight:bold}.highlight .m{color:#099}.highlight .s{color:#d14}.highlight .na{color:teal}.highlight .nb{color:#0086B3}.highlight .nc{color:#458;font-weight:bold}.highlight .no{color:teal}.highlight .ni{color:purple}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:#900;font-weight:bold}.highlight .nn{color:#555}.highlight .nt{color:navy}.highlight .nv{color:teal}.highlight .ow{font-weight:bold}.highlight .w{color:#bbb}.highlight .mf{color:#099}.highlight .mh{color:#099}.highlight .mi{color:#099}.highlight .mo{color:#099}.highlight .sb{color:#d14}.highlight .sc{color:#d14}.highlight .sd{color:#d14}.highlight .s2{color:#d14}.highlight .se{color:#d14}.highlight .sh{color:#d14}.highlight .si{color:#d14}.highlight .sx{color:#d14}.highlight .sr{color:#009926}.highlight .s1{color:#d14}.highlight .ss{color:#990073}.highlight .bp{color:#999}.highlight .vc{color:teal}.highlight .vg{color:teal}.highlight .vi{color:teal}.highlight .il{color:#099}.container{max-width:1200px;padding-left:20px;padding-right:20px;margin:0 auto}.container-full{max-width:100%;padding-left:20px;padding-right:20px;margin:0 auto}.row{display:flex;flex-wrap:wrap;flex:0 1 auto;flex-direction:row;box-sizing:border-box;margin-left:-20px;margin-right:-20px}.col{padding-left:20px;padding-right:20px}[class^="col-"]{flex:auto}.col-0{width:0%}.col-1{width:8.3333333333%}.col-2{width:16.6666666667%}.col-3{width:25%}.col-4{width:33.3333333333%}.col-5{width:41.6666666667%}.col-6{width:50%}.col-7{width:58.3333333333%}.col-8{width:66.6666666667%}.col-9{width:75%}.col-10{width:83.3333333333%}.col-11{width:91.6666666667%}.col-12{width:100%}.push-0{margin-left:0%}.push-1{margin-left:8.3333333333%}.push-2{margin-left:16.6666666667%}.push-3{margin-left:25%}.push-4{margin-left:33.3333333333%}.push-5{margin-left:41.6666666667%}.push-6{margin-left:50%}.push-7{margin-left:58.3333333333%}.push-8{margin-left:66.6666666667%}.push-9{margin-left:75%}.push-10{margin-left:83.3333333333%}.push-11{margin-left:91.6666666667%}.push-12{margin-left:100%}.pull-0{margin-right:0%}.pull-1{margin-right:8.3333333333%}.pull-2{margin-right:16.6666666667%}.pull-3{margin-right:25%}.pull-4{margin-right:33.3333333333%}.pull-5{margin-right:41.6666666667%}.pull-6{margin-right:50%}.pull-7{margin-right:58.3333333333%}.pull-8{margin-right:66.6666666667%}.pull-9{margin-right:75%}.pull-10{margin-right:83.3333333333%}.pull-11{margin-right:91.6666666667%}.pull-12{margin-right:100%}@media (max-width: 992px){.col-d-0{width:0%}.col-d-1{width:8.3333333333%}.col-d-2{width:16.6666666667%}.col-d-3{width:25%}.col-d-4{width:33.3333333333%}.col-d-5{width:41.6666666667%}.col-d-6{width:50%}.col-d-7{width:58.3333333333%}.col-d-8{width:66.6666666667%}.col-d-9{width:75%}.col-d-10{width:83.3333333333%}.col-d-11{width:91.6666666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.3333333333%}.push-d-2{margin-left:16.6666666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.3333333333%}.push-d-5{margin-left:41.6666666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.3333333333%}.push-d-8{margin-left:66.6666666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.3333333333%}.push-d-11{margin-left:91.6666666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.3333333333%}.pull-d-2{margin-right:16.6666666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.3333333333%}.pull-d-5{margin-right:41.6666666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.3333333333%}.pull-d-8{margin-right:66.6666666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.3333333333%}.pull-d-11{margin-right:91.6666666667%}.pull-d-12{margin-right:100%}}@media (max-width: 768px){.col-t-0{width:0%}.col-t-1{width:8.3333333333%}.col-t-2{width:16.6666666667%}.col-t-3{width:25%}.col-t-4{width:33.3333333333%}.col-t-5{width:41.6666666667%}.col-t-6{width:50%}.col-t-7{width:58.3333333333%}.col-t-8{width:66.6666666667%}.col-t-9{width:75%}.col-t-10{width:83.3333333333%}.col-t-11{width:91.6666666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.3333333333%}.push-t-2{margin-left:16.6666666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.3333333333%}.push-t-5{margin-left:41.6666666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.3333333333%}.push-t-8{margin-left:66.6666666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.3333333333%}.push-t-11{margin-left:91.6666666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.3333333333%}.pull-t-2{margin-right:16.6666666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.3333333333%}.pull-t-5{margin-right:41.6666666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.3333333333%}.pull-t-8{margin-right:66.6666666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.3333333333%}.pull-t-11{margin-right:91.6666666667%}.pull-t-12{margin-right:100%}}@media (max-width: 576px){.col-m-0{width:0%}.col-m-1{width:8.3333333333%}.col-m-2{width:16.6666666667%}.col-m-3{width:25%}.col-m-4{width:33.3333333333%}.col-m-5{width:41.6666666667%}.col-m-6{width:50%}.col-m-7{width:58.3333333333%}.col-m-8{width:66.6666666667%}.col-m-9{width:75%}.col-m-10{width:83.3333333333%}.col-m-11{width:91.6666666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.3333333333%}.push-m-2{margin-left:16.6666666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.3333333333%}.push-m-5{margin-left:41.6666666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.3333333333%}.push-m-8{margin-left:66.6666666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.3333333333%}.push-m-11{margin-left:91.6666666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.3333333333%}.pull-m-2{margin-right:16.6666666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.3333333333%}.pull-m-5{margin-right:41.6666666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.3333333333%}.pull-m-8{margin-right:66.6666666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.3333333333%}.pull-m-11{margin-right:91.6666666667%}.pull-m-12{margin-right:100%}}@media (max-width: 992px){.col-d-0{width:0%}.col-d-1{width:8.3333333333%}.col-d-2{width:16.6666666667%}.col-d-3{width:25%}.col-d-4{width:33.3333333333%}.col-d-5{width:41.6666666667%}.col-d-6{width:50%}.col-d-7{width:58.3333333333%}.col-d-8{width:66.6666666667%}.col-d-9{width:75%}.col-d-10{width:83.3333333333%}.col-d-11{width:91.6666666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.3333333333%}.push-d-2{margin-left:16.6666666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.3333333333%}.push-d-5{margin-left:41.6666666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.3333333333%}.push-d-8{margin-left:66.6666666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.3333333333%}.push-d-11{margin-left:91.6666666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.3333333333%}.pull-d-2{margin-right:16.6666666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.3333333333%}.pull-d-5{margin-right:41.6666666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.3333333333%}.pull-d-8{margin-right:66.6666666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.3333333333%}.pull-d-11{margin-right:91.6666666667%}.pull-d-12{margin-right:100%}}@media (max-width: 768px){.col-t-0{width:0%}.col-t-1{width:8.3333333333%}.col-t-2{width:16.6666666667%}.col-t-3{width:25%}.col-t-4{width:33.3333333333%}.col-t-5{width:41.6666666667%}.col-t-6{width:50%}.col-t-7{width:58.3333333333%}.col-t-8{width:66.6666666667%}.col-t-9{width:75%}.col-t-10{width:83.3333333333%}.col-t-11{width:91.6666666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.3333333333%}.push-t-2{margin-left:16.6666666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.3333333333%}.push-t-5{margin-left:41.6666666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.3333333333%}.push-t-8{margin-left:66.6666666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.3333333333%}.push-t-11{margin-left:91.6666666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.3333333333%}.pull-t-2{margin-right:16.6666666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.3333333333%}.pull-t-5{margin-right:41.6666666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.3333333333%}.pull-t-8{margin-right:66.6666666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.3333333333%}.pull-t-11{margin-right:91.6666666667%}.pull-t-12{margin-right:100%}}@media (max-width: 576px){.col-m-0{width:0%}.col-m-1{width:8.3333333333%}.col-m-2{width:16.6666666667%}.col-m-3{width:25%}.col-m-4{width:33.3333333333%}.col-m-5{width:41.6666666667%}.col-m-6{width:50%}.col-m-7{width:58.3333333333%}.col-m-8{width:66.6666666667%}.col-m-9{width:75%}.col-m-10{width:83.3333333333%}.col-m-11{width:91.6666666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.3333333333%}.push-m-2{margin-left:16.6666666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.3333333333%}.push-m-5{margin-left:41.6666666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.3333333333%}.push-m-8{margin-left:66.6666666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.3333333333%}.push-m-11{margin-left:91.6666666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.3333333333%}.pull-m-2{margin-right:16.6666666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.3333333333%}.pull-m-5{margin-right:41.6666666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.3333333333%}.pull-m-8{margin-right:66.6666666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.3333333333%}.pull-m-11{margin-right:91.6666666667%}.pull-m-12{margin-right:100%}}@media (max-width: 992px){.col-d-0{width:0%}.col-d-1{width:8.3333333333%}.col-d-2{width:16.6666666667%}.col-d-3{width:25%}.col-d-4{width:33.3333333333%}.col-d-5{width:41.6666666667%}.col-d-6{width:50%}.col-d-7{width:58.3333333333%}.col-d-8{width:66.6666666667%}.col-d-9{width:75%}.col-d-10{width:83.3333333333%}.col-d-11{width:91.6666666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.3333333333%}.push-d-2{margin-left:16.6666666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.3333333333%}.push-d-5{margin-left:41.6666666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.3333333333%}.push-d-8{margin-left:66.6666666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.3333333333%}.push-d-11{margin-left:91.6666666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.3333333333%}.pull-d-2{margin-right:16.6666666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.3333333333%}.pull-d-5{margin-right:41.6666666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.3333333333%}.pull-d-8{margin-right:66.6666666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.3333333333%}.pull-d-11{margin-right:91.6666666667%}.pull-d-12{margin-right:100%}}@media (max-width: 768px){.col-t-0{width:0%}.col-t-1{width:8.3333333333%}.col-t-2{width:16.6666666667%}.col-t-3{width:25%}.col-t-4{width:33.3333333333%}.col-t-5{width:41.6666666667%}.col-t-6{width:50%}.col-t-7{width:58.3333333333%}.col-t-8{width:66.6666666667%}.col-t-9{width:75%}.col-t-10{width:83.3333333333%}.col-t-11{width:91.6666666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.3333333333%}.push-t-2{margin-left:16.6666666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.3333333333%}.push-t-5{margin-left:41.6666666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.3333333333%}.push-t-8{margin-left:66.6666666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.3333333333%}.push-t-11{margin-left:91.6666666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.3333333333%}.pull-t-2{margin-right:16.6666666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.3333333333%}.pull-t-5{margin-right:41.6666666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.3333333333%}.pull-t-8{margin-right:66.6666666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.3333333333%}.pull-t-11{margin-right:91.6666666667%}.pull-t-12{margin-right:100%}}@media (max-width: 576px){.col-m-0{width:0%}.col-m-1{width:8.3333333333%}.col-m-2{width:16.6666666667%}.col-m-3{width:25%}.col-m-4{width:33.3333333333%}.col-m-5{width:41.6666666667%}.col-m-6{width:50%}.col-m-7{width:58.3333333333%}.col-m-8{width:66.6666666667%}.col-m-9{width:75%}.col-m-10{width:83.3333333333%}.col-m-11{width:91.6666666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.3333333333%}.push-m-2{margin-left:16.6666666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.3333333333%}.push-m-5{margin-left:41.6666666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.3333333333%}.push-m-8{margin-left:66.6666666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.3333333333%}.push-m-11{margin-left:91.6666666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.3333333333%}.pull-m-2{margin-right:16.6666666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.3333333333%}.pull-m-5{margin-right:41.6666666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.3333333333%}.pull-m-8{margin-right:66.6666666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.3333333333%}.pull-m-11{margin-right:91.6666666667%}.pull-m-12{margin-right:100%}}img[data-action="zoom"]{cursor:pointer;cursor:-webkit-zoom-in;cursor:-moz-zoom-in}.zoom-img,.zoom-img-wrap{position:relative;z-index:666;-webkit-transition:all 300ms;-o-transition:all 300ms;transition:all 300ms}img.zoom-img{cursor:pointer;cursor:-webkit-zoom-out;cursor:-moz-zoom-out}.zoom-overlay{z-index:420;background:#fff;position:fixed;top:0;left:0;right:0;bottom:0;pointer-events:none;opacity:0;-webkit-transition:opacity 300ms;-o-transition:opacity 300ms;transition:opacity 300ms}.zoom-overlay-open .zoom-overlay{opacity:1}.zoom-overlay-open,.zoom-overlay-transitioning{cursor:default}*,*::after,*::before{box-sizing:border-box}body{font-family:"Roboto",Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;line-height:26px;color:#393e46;background-color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body input,body textarea{border:1px solid #e6eef0;outline:none}body input:focus:required:invalid,body textarea:focus:required:invalid{border-color:#e02f40}body input:required:valid,body textarea:required:valid{border-color:#34a74e}::placeholder{color:#666}*::selection{color:#fff;background-color:#393e46}h1,h2,h3,h4,h5,h6{font-family:"Roboto",Helvetica Neue,Helvetica,Arial,sans-serif;line-height:initial;letter-spacing:0.5px}h1{font-size:36px}h2{font-size:28px}h3{font-size:24px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}blockquote{margin:30px -100px;font-size:28px;line-height:45px;letter-spacing:0.5px;font-style:normal;text-align:center}@media only screen and (max-width: 768px){blockquote{margin:30px 0;font-size:24px;line-height:38px}}pre{overflow:auto;padding:15px;margin-bottom:0;font-size:14px;white-space:pre-wrap;word-wrap:break-word;word-break:break-all}img,.zoom-img-wrap{max-width:100%;height:auto;vertical-align:middle}img+em,.zoom-img-wrap+em{text-align:center;display:block;font-style:normal;font-weight:normal;font-size:14px;color:#bbb}a{text-decoration:none;color:#f6b141;transition:all 0.35s}a:hover{color:#f49d10}a:active{color:#c87f09}hr{display:block;height:1px;margin:40px 0;border:0;background:#e6eef0}.top{position:fixed;bottom:40px;right:-100px;z-index:1;width:35px;height:35px;text-align:center;line-height:35px;background-color:#393e46;color:#fff;cursor:pointer;transition:all .25s ease}.top.is-active{right:40px}.top:hover{background-color:#000}@media only screen and (max-width: 768px){.top{bottom:25px}.top.is-active{right:30px}}.header{position:relative;height:100px}.header .header__overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:10;background-color:rgba(17,17,17,0.7);cursor:pointer;opacity:0;visibility:hidden;transition:all 0.5s ease}@media only screen and (max-width: 992px){.header .header__overlay.is-visible{opacity:1;visibility:visible}}.logo{position:absolute;top:50%;left:0;transform:translateY(-50%)}.logo .logo__link{font-size:30px;font-weight:700;letter-spacing:0.5px;color:#393e46;text-decoration:none}.logo .logo__link:hover{color:#000}.logo .logo__image{max-height:50px}.main-nav{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.main-nav .nav-icon__close{display:none;font-size:24px;text-align:right;cursor:pointer}.main-nav .nav-icon__close:hover{color:#000}.main-nav .nav__title{display:none}.main-nav .nav__list{white-space:nowrap}.main-nav .nav__list .nav__item{display:inline-block}.main-nav .nav__list .nav__item .nav__link{display:inline-block;padding:10px 30px;font-size:14px;font-weight:700;letter-spacing:0.5px;text-transform:uppercase;color:#393e46}.main-nav .nav__list .nav__item .nav__link:hover{color:#000}@media only screen and (max-width: 992px){.main-nav{position:fixed;top:0;left:inherit;right:-300px;bottom:0;transform:none;z-index:100;width:300px;height:100vh;padding:40px 30px 30px;transition:right 0.5s cubic-bezier(0.7, 0.4, 0, 1);background:#fff}.main-nav.is-open{right:0}.main-nav .nav-icon__close{display:block}.main-nav .nav__title{display:block;padding-left:30px;padding-bottom:7px;margin-bottom:10px;color:#bbb;border-bottom:1px solid #e6eef0}.main-nav .nav__list .nav__item{display:block}}.nav-buttons{position:absolute;top:50%;right:0;transform:translateY(-50%);font-size:21px}.nav-buttons .nav__icon{color:#393e46;cursor:pointer}.nav-buttons .nav__icon:hover{color:#000}.nav-buttons .nav__icon-menu{display:none;margin-right:10px}.nav-buttons .nav__icon-menu:hover{color:#000}@media only screen and (max-width: 992px){.nav-buttons .nav__icon-menu{display:inline-block}}.nav-buttons .nav__icon-flag{width:16px;height:16px;background-size:contain}.nav-buttons .en{background-image:url("/blog/images/united-states-small.png")}.nav-buttons .fr{background-image:url("/blog/images/france-small.png")}.hero{padding:80px 0;margin-bottom:80px;background:#f5f5f5}.hero .last-item{display:flex}.hero .hero__content{display:flex;flex-direction:column;justify-content:center;width:100%;padding:0 40px 0 0}.hero .hero__content .hero__title{font-size:38px;font-weight:normal}.hero .hero__content .hero__subtitle{font-size:18px;line-height:32px;letter-spacing:0.5px}.hero .hero__content .hero__social{display:flex}.hero .hero__content .hero__social-title{font-weight:700}.hero .hero__image img{box-shadow:0 1px 4px rgba(0,0,0,0.15)}@media only screen and (max-width: 992px){.hero .hero__content{padding:0}.hero .hero__content .hero__subtitle{font-size:16px;line-height:28px}}@media only screen and (max-width: 768px){.hero{margin-bottom:40px}.hero .last-item{order:1}.hero .hero__content .hero__title{margin-bottom:20px;font-size:27px}.hero .hero__image{margin-bottom:20px}.hero .hero__image img{box-shadow:none}}@media only screen and (max-width: 576px){.hero{padding:40px 0}}.search{position:fixed;top:0;left:0;right:0;bottom:0;z-index:-1;transform:scale(0.95);opacity:0;background:#fff;transition:all 250ms ease}.search.is-visible{transform:scale(1);z-index:100;opacity:1;transition:all 250ms ease}.search__box{width:50%;margin:0 auto;padding-top:100px}@media only screen and (max-width: 992px){.search__box{width:70%;padding-top:70px}}@media only screen and (max-width: 576px){.search__box{width:100%;padding-top:30px}}.search__group{margin-bottom:50px}.search__group .search__close{margin-bottom:30px;font-size:27px;text-align:right;cursor:pointer}.search__group .search__close:hover{color:#000}.search__group .search__text{width:100%;padding:20px 20px 20px 30px;letter-spacing:0.5px;border-radius:30px;border:1px solid #f8f8f8;color:#393e46;background:#f8f8f8}.search__group .search__text::placeholder{letter-spacing:0.5px;color:rgba(57,62,70,0.7)}.search-results-list{height:65vh;margin:0;padding:0 20px;list-style:decimal;overflow:auto;white-space:normal}.search-results-list .search-results__item{margin-bottom:10px;padding-left:10px;padding-bottom:10px;font-weight:700;border-bottom:1px solid #f5efef}.search-results-list .search-results__item:first-child{padding-top:20px;border-top:1px solid #f5efef}.search-results-list .search-results__link{font-size:18px;font-weight:700;letter-spacing:0.5px;color:#393e46}.search-results-list .search-results__link:hover{color:#000}.search-results-list .search-results__date{font-size:12px;color:#bbb}.search-results-list .no-results{list-style:none;padding:20px 0;font-size:18px;font-weight:700;letter-spacing:0.5px;border-top:1px solid #f5efef;border-bottom:1px solid #f5efef}.contact .contact__list li{margin-left:15px;display:inline-block}.contact .contact__list li a{font-size:18px;color:#bbb}.contact .contact__list li a:hover{color:#393e46}.pagination{margin:20px 0 40px;padding:40px 0;text-align:center}@media only screen and (max-width: 576px){.pagination{margin:0 0 20px}}.pagination__list{display:flex;justify-content:space-between;align-items:center}.pagination__list .next-link,.pagination__list .previous-link,.pagination__list .disabled{display:inline-block;width:140px;height:50px;line-height:50px;font-size:12px;letter-spacing:1px;text-transform:uppercase;transition:all .35s;box-shadow:0 1px 3px 0 rgba(0,0,0,0.15);background:#fff}.pagination__list .next-link,.pagination__list .previous-link{color:#393e46}.pagination__list .next-link:hover,.pagination__list .previous-link:hover{color:#000}.pagination__list .disabled{color:#bbb;cursor:not-allowed}.pagination__list .counter-box a,.pagination__list .counter-box span{padding:0 5px;font-size:15px;color:#393e46}.pagination__list .counter-box .active-link{font-weight:700}@media only screen and (max-width: 576px){.pagination__list{flex-direction:column}.pagination__list .next-link,.pagination__list .previous-link,.pagination__list .disabled{margin:10px 0}}.subscribe{width:430px;max-width:100%;margin:0 auto 80px;text-align:center}.subscribe .subscribe__title{margin-bottom:10px;font-size:37px;line-height:57px}.subscribe .subscribe__subtitle{margin-bottom:30px;font-size:17px;line-height:27px}.subscribe .subscribe-form .subscribe-group{margin-bottom:30px}.subscribe .subscribe-form .subscribe__email{width:100%;padding:17px;font-size:16px;text-align:center;outline:none;border:none;border-bottom:3px solid #e6eef0}.subscribe .subscribe-form .subscribe__email::placeholder{font-size:18px;color:#e6eef0}.subscribe .subscribe-form .subscribe__button{width:127px;height:57px;font-size:14px;font-weight:700;letter-spacing:0.5px;border-radius:30px;border:none;background:#e6eef0;cursor:pointer;transition:all .35s}.subscribe .subscribe-form .subscribe__button:hover{color:#fff;background:#393e46}@media only screen and (max-width: 576px){.subscribe{margin:0 auto 40px}.subscribe .subscribe__subtitle{font-size:16px;line-height:26px}}.instagram-box{position:relative;margin:0 0 80px}.instagram-box .istagram-contact{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);z-index:1;display:block;padding:8px 15px;font-size:14px;letter-spacing:0.5px;border-radius:3px;box-shadow:0 4px 4px 0 rgba(0,0,0,0.15);color:#393e46;background:#fff}.instagram-box .istagram-contact:hover{color:#000}.instagram-box .instagram .instagram-item{width:16.6%;display:inline-block;transition:all .35s}.instagram-box .instagram .instagram-item:hover{opacity:0.9}@media only screen and (max-width: 768px){.instagram-box .instagram .instagram-item{width:33.3%}}@media only screen and (max-width: 576px){.instagram-box{margin:0 0 40px}}.footer{position:relative;padding:80px 0 40px;text-align:center;border-top:1px solid #e6eef0;background:#f5f5f5}.footer .contact{margin-bottom:15px}.footer .copyright a{color:#393e46}.footer .copyright a:hover{color:#f6b141}@media only screen and (max-width: 576px){.footer{padding:40px 0 20px}}.lates-title{position:relative;margin-bottom:80px;font-size:14px;line-height:24px;letter-spacing:1px;text-transform:uppercase;font-weight:normal;text-align:center}.lates-title:after,.lates-title:before{content:"";display:block;position:absolute;top:50%;transform:translateY(-50%);height:1px;background:#e6eef0}.lates-title:after{width:calc(50% - 90px);left:0}.lates-title:before{width:calc(50% - 90px);right:0}@media only screen and (max-width: 768px){.lates-title{margin-bottom:40px}.lates-title:after,.lates-title:before{width:calc(50% - 70px)}}.page-title-box{padding:80px 0;border-top:1px solid #e6eef0}.page-title-box .page-title{font-size:57px;line-height:70px;margin:0}@media only screen and (max-width: 576px){.page-title-box{padding:40px 0}.page-title-box .page-title{font-size:47px;line-height:53px}}.page__head .page-image{background-size:cover;background-position:center;background-repeat:no-repeat;background-color:#e6eef0}.page__head .page-image:after{content:"";display:table;width:100%;min-height:300px;padding-top:50%}.page{margin:80px auto}.page img{margin:30px 0}@media only screen and (max-width: 768px){.page{margin:40px auto}}.page-box{text-align:center}.page-box .back-arrow a{display:inline-block;margin-left:10px;color:#393e46;font-weight:700}.page-box .back-arrow a:hover{color:#000}.article{margin-bottom:40px}.article .article__wrapper{display:flex;align-items:center}.article .article__image{width:50%;display:block;background-position:center;background-size:cover;background-repeat:no-repeat;background-color:#e6eef0}.article .article__image:hover{opacity:0.9}.article .article__image:after{content:"";display:table;width:100%;padding-bottom:70%}.article .article__content{width:60%;padding:50px;margin-left:-10%;z-index:1;border-radius:3px;background:rgba(255,255,255,0.98);box-shadow:0 1px 4px rgba(0,0,0,0.15)}.article .article__content .article__tag{font-size:12px;letter-spacing:0.5px;font-weight:700;text-transform:uppercase}.article .article__content .article__title{margin-bottom:20px;font-size:30px}.article .article__content .article__title a{color:#393e46}.article .article__content .article__title a:hover{color:#000}.article .article__content .article__excerpt{margin-bottom:20px;font-size:16px;line-height:26px}.article .article__content .article__meta{font-size:12px;line-height:18px;text-transform:uppercase;color:#bbb}.article .article__content .article__footer{display:flex;align-items:center}.article .article__content .article__footer .read-more{margin-left:auto;padding-bottom:5px;font-size:12px;line-height:18px;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid transparent;color:#bbb}.article .article__content .article__footer .read-more:hover{color:#393e46;border-color:#f6b141}.article .article-without-image{width:100%;margin-left:auto}@media only screen and (max-width: 768px){.article .article__wrapper{flex-direction:column}.article .article__image{width:100%}.article .article__content{width:90%;padding:20px;margin:-10% 0 0 0}.article .article-without-image{width:90%;margin:0}}@media only screen and (max-width: 576px){.article .article__content .article__title{font-size:27px}}.post-title-box{padding:80px 0;border-top:1px solid #e6eef0}.post-title-box .post-title{margin-bottom:10px;width:500px;max-width:100%;font-size:57px;line-height:70px}.post-title-box .post__date{font-weight:700}@media only screen and (max-width: 576px){.post-title-box{padding:40px 0}.post-title-box .post-title{margin:10px 0;font-size:47px;line-height:53px}}.post__info{display:flex;align-items:center}.post__info .post__author{margin-right:10px;font-weight:700}.post__info .post__author .author-name{color:#bbb;border-bottom:1px solid transparent}.post__info .post__author .author-name:hover{border-bottom:1px solid #bbb}.post__info .post__tags .post__tags-tag{position:relative;padding-left:15px;font-weight:700}.post__info .post__tags .post__tags-tag:before{content:"";position:absolute;top:50%;left:0;transform:translateY(-50%);width:5px;height:5px;border-radius:50%;background:#393e46}.post-image{background-size:cover;background-position:center;background-repeat:no-repeat;background-color:#e6eef0}.post-image:after{content:"";display:table;width:100%;min-height:300px;padding-top:50%}.post{margin:80px auto}.post.post-no-image{margin:0 auto 80px}@media only screen and (max-width: 576px){.post{margin:40px auto}.post.post-no-image{margin:0 auto 40px}}.post img{margin:30px 0}.post__content{margin-bottom:40px}.post__share{display:flex}.post__share .share__title{margin-right:10px;font-size:18px;font-weight:700;letter-spacing:0.5px}.post__share .share__list .share__item{display:inline-block;margin:0 10px}.post__share .share__list .share__item a{font-size:18px;color:#bbb}.post__share .share__list .share__item a:hover{color:#393e46}.post__navigation{display:flex;align-items:baseline;margin-bottom:80px;padding-bottom:80px;border-bottom:1px solid #e6eef0}.post__navigation .prev,.post__navigation .next{flex:1 0 50%}.post__navigation .prev:last-child,.post__navigation .next:last-child{padding-right:0}.post__navigation .prev .post__nav__image,.post__navigation .next .post__nav__image{display:block;margin-bottom:40px;background-position:center;background-size:cover;background-repeat:no-repeat;background-color:#e6eef0;transition:.35s ease-in-out}.post__navigation .prev .post__nav__image:hover,.post__navigation .next .post__nav__image:hover{opacity:0.9}.post__navigation .prev .post__nav__image:after,.post__navigation .next .post__nav__image:after{content:"";display:table;width:100%;padding-bottom:65%}.post__navigation .prev .post__nav__title,.post__navigation .next .post__nav__title{margin-bottom:20px;font-size:27px;line-height:37px;text-transform:uppercase;letter-spacing:2px;text-align:center}.post__navigation .prev .post__nav__title a,.post__navigation .next .post__nav__title a{display:inline-block;max-width:250px;padding:0 10px;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#393e46}.post__navigation .prev .post__nav__title a:hover,.post__navigation .next .post__nav__title a:hover{color:#000}.post__navigation .prev{padding-right:10px}.post__navigation .next{padding-left:10px}.post__navigation .prev__excerpt,.post__navigation .next__excerpt{width:100%;max-width:400px;margin:0 auto;text-align:center}@media only screen and (max-width: 768px){.post__navigation{flex-wrap:wrap}.post__navigation .prev,.post__navigation .next{flex:1 0 100%;padding:0}.post__navigation .next{margin-top:40px}}@media only screen and (max-width: 576px){.post__navigation{margin-bottom:40px;padding-bottom:40px}.post__navigation .prev .post__nav__image,.post__navigation .next .post__nav__image{margin-bottom:20px}}.comments{margin-bottom:80px}@media only screen and (max-width: 576px){.comments{margin-bottom:40px}}.arhive-head{padding:80px 0;margin-bottom:40px;background:#f5f5f5}.arhive-head .archive-title{text-align:center;font-weight:normal}.arhive-head .archive-title span{font-weight:700}@media only screen and (max-width: 576px){.arhive-head{margin-bottom:40px}}.experiences-title-box{padding:80px 0;border-top:1px solid #e6eef0}.experiences-title-box .experiences-title{margin-bottom:10px;width:500px;max-width:100%;font-size:57px;line-height:70px}.experiences-title-box .experiences__date{font-weight:700}@media only screen and (max-width: 576px){.experiences-title-box{padding:40px 0}.experiences-title-box .experiences-title{margin:10px 0;font-size:47px;line-height:53px}}.experiences__head .experiences-image{background-size:cover;background-position:center;background-repeat:no-repeat;background-color:#e6eef0}.experiences__head .experiences-image:after{content:"";display:table;width:100%;min-height:300px;padding-top:50%}.experiences{margin-bottom:40px;margin-top:40px}.experiences .experiences__wrapper{display:flex;align-items:center}.experiences .experiences__image{width:50%;display:block;background-position:center;background-size:cover;background-repeat:no-repeat;background-color:#e6eef0}.experiences .experiences__image:hover{opacity:0.9}.experiences .experiences__image:after{content:"";display:table;width:100%;padding-bottom:70%}.experiences .experiences__content{width:100%;padding:50px;z-index:1;border-radius:3px;background:rgba(255,255,255,0.98);box-shadow:0 1px 4px rgba(0,0,0,0.15)}.experiences .experiences__content .experiences__tag{font-size:12px;letter-spacing:0.5px;font-weight:700;text-transform:uppercase}.experiences .experiences__content .experiences-maintitle{color:#0c9ba6;font-size:30px;text-transform:uppercase}.experiences .experiences__content .experiences__logo{width:100px;height:100px;display:block;background-position:center;background-size:cover;background-repeat:no-repeat;background-color:#e6eef0;float:right}.experiences .experiences__content .experiences__logo:hover{opacity:0.9}.experiences .experiences__content .experiences__logo:after{content:"";display:table;width:50%;padding-bottom:70%}.experiences .experiences__content .experiences__title{margin-bottom:20px;font-size:30px}.experiences .experiences__content .experiences__title a{color:#393e46}.experiences .experiences__content .experiences__title a:hover{color:#000}.experiences .experiences__content .experiences__excerpt{margin-bottom:20px;font-size:16px;line-height:26px}.experiences .experiences__content .experiences__meta{font-size:12px;line-height:18px;text-transform:uppercase;color:#bbb}.experiences .experiences__content .experiences__footer{display:flex;align-items:center}.experiences .experiences__content .experiences__footer .read-more{margin-left:auto;padding-bottom:5px;font-size:12px;line-height:18px;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid transparent;color:#bbb}.experiences .experiences__content .experiences__footer .read-more:hover{color:#393e46;border-color:#f6b141}.experiences .experiences__share{display:flex;justify-content:center;margin-top:20px}.experiences .experiences__share .share__title{margin-right:10px;font-size:18px;font-weight:700;letter-spacing:0.5px}.experiences .experiences__share .share__list .share__item{display:inline-block;margin:0 10px}.experiences .experiences__share .share__list .share__item a{font-size:18px;color:#bbb}.experiences .experiences__share .share__list .share__item a:hover{color:#393e46}.experiences .experiences-without-image{width:100%;margin-left:auto}@media only screen and (max-width: 768px){.experiences .experiences__wrapper{flex-direction:column}.experiences .experiences__image{width:100%}.experiences .experiences__content{width:90%;padding:20px;margin:-10% 0 0 0}.experiences .experiences-without-image{width:90%;margin:0}}@media only screen and (max-width: 576px){.experiences .experiences__content .experiences__title{font-size:27px}}.lates-title{position:relative;margin-bottom:80px;font-size:14px;line-height:24px;letter-spacing:1px;text-transform:uppercase;font-weight:normal;text-align:center}.lates-title:after,.lates-title:before{content:"";display:block;position:absolute;top:50%;transform:translateY(-50%);height:1px;background:#e6eef0}.lates-title:after{width:calc(50% - 90px);left:0}.lates-title:before{width:calc(50% - 90px);right:0}@media only screen and (max-width: 768px){.lates-title{margin-bottom:40px}.lates-title:after,.lates-title:before{width:calc(50% - 70px)}}.experience-title-box{padding:80px 0;border-top:1px solid #e6eef0}.experience-title-box .experience-title{font-size:57px;line-height:70px;margin:0}.experience-title-box .experience-compagny{color:#0c9ba6}@media only screen and (max-width: 576px){.experience-title-box{padding:40px 0}.experience-title-box .experience-title{font-size:47px;line-height:53px}}.experience__head .experience-image{background-size:cover;background-position:center;background-repeat:no-repeat;background-color:#e6eef0;height:300px}.experience__head .experience-image:after{content:"";display:table;width:100%;min-height:100px;padding-top:50%}.experience{margin:80px auto}.experience img{margin:30px 0}@media only screen and (max-width: 768px){.experience{margin:40px auto}}.experience-box{text-align:center}.experience-box .back-arrow a{display:inline-block;margin-left:10px;color:#393e46;font-weight:700}.experience-box .back-arrow a:hover{color:#000}.certification{margin-bottom:40px}.certification .certification__wrapper{display:flex;align-items:center}.certification .certification__image{width:60%;display:block;background-position:center;background-size:contain;background-repeat:no-repeat;background-color:#e6eef0}.certification .certification__image:hover{opacity:0.9}.certification .certification__image:after{content:"";display:table;width:100%;padding-bottom:70%}.certification .certification__content{width:60%;padding:50px;margin-left:-5%;z-index:1;border-radius:3px;background:rgba(255,255,255,0.98);box-shadow:0 1px 4px rgba(0,0,0,0.15)}.certification .certification__content .certification__tag{font-size:12px;letter-spacing:0.5px;font-weight:700;text-transform:uppercase}.certification .certification__content .certification__title{margin-bottom:20px;font-size:20px;color:#0c9ba6}.certification .certification__content .certification__title a{color:#393e46}.certification .certification__content .certification__title a:hover{color:#000}.certification .certification__content .certification__excerpt{display:none;margin-bottom:20px;font-size:16px;line-height:26px}.certification .certification__content .certification__meta{font-size:12px;line-height:18px;text-transform:uppercase;color:#bbb}.certification .certification__content .certification__footer{display:flex;align-items:center}.certification .certification__content .certification__footer .read-more{margin-left:auto;padding-bottom:5px;font-size:12px;line-height:18px;letter-spacing:1px;text-transform:uppercase;border-bottom:1px solid transparent;color:#bbb}.certification .certification__content .certification__footer .read-more:hover{color:#393e46;border-color:#f6b141}.certification .certification-without-image{width:100%;margin-left:auto}@media only screen and (max-width: 768px){.certification .certification__wrapper{flex-direction:column}.certification .certification__image{width:100%;display:none}.certification .certification__content{width:90%;padding:10px;margin:-10% 0 0 0}.certification .certification-without-image{width:90%;margin:0}.certification .certification__tag{font-size:8px}}@media only screen and (max-width: 576px){.certification .certification .container{padding:0px}.certification .certification__content .certification__title{font-size:12px}.certification .certification__content .certification__content{padding:2px}.certification .certification__content .certification__tag{font-size:8px}.certification .certification__content .certification__image{display:none}}.skill-box{width:100%;padding:15px;margin:20px;background-color:white;border-radius:5px;top:50%;left:50%;box-shadow:1px 2px 6px rgba(0,0,0,0.1)}.skill-box>h3{margin-bottom:15px;color:#f6b141}.skill-box>.skills-circle>ul{padding:0;text-align:center;list-style-type:none}.skill-box>.skills-circle>ul>li{width:150px;height:150px;background-color:#ddd;border-radius:50%;position:relative;display:inline-block;overflow:hidden;margin:10px}.skill-box>.skills-circle>ul>li>span{color:#0c9ba6}.skill-box>.skills-circle>ul>li>span ~ b{top:50%;left:50%;position:absolute;-webkit-transform:translate(-50%, 20%);-ms-transform:translate(-50%, 20%);transform:translate(-50%, 20%);margin-top:-8px;z-index:1}.skill-box>.skills-circle>ul>li>span ~ b ~ b{font-weight:normal;margin-top:8px}.skill-box>.skills-circle>ul>li>span.text{top:50%;left:50%;position:absolute;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);margin-top:-8px;z-index:1}.skill-box>.skills-circle>ul>li>span.text ~ b{font-weight:normal;margin-top:8px}.skill-box>.skills-circle>ul>li>span.bar-circle-right{border-radius:50%;position:absolute;display:block;width:100%;height:100%;background:#0c9ba6;clip:rect(0, 75px, 150px, 0)}.skill-box>.skills-circle>ul>li>span.bar-circle-left{border-radius:50%;position:absolute;display:block;width:100%;height:100%;background:#0c9ba6;clip:rect(0, 75px, 150px, 0);background:#ddd}.skill-box>.skills-circle>ul>li>span.bar-circle-cover{display:block;width:95%;height:95%;border-radius:50%;background-color:#eee;z-index:0;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%)}

  </style>
</head>

<body>

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3N0YD35HJK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3N0YD35HJK');
</script>
  

  <div class="container">
  <div class="row">
    <div class="col col-12">
      <!-- begin header -->
      <header class="header">

        <div class="logo">
          <a class="logo__link" href="/blog/">
            <img class="logo__image" src="/blog/images/logo2.png"
              alt="Matthieu Petite">
          </a>
        </div>

        <nav class="main-nav">

          <div class="main-nav__box">
            <div class="nav-icon__close">
              <i class="ion ion-ios-close-circle-outline"></i>
            </div>

            <div class="nav__title">Menu</div>

            <ul class="nav__list list-reset">
              <li class="nav__item">
                <a href="/blog/" class="nav__link">Accueil</a>
              </li>
              <li class="nav__item">
                <a href="/blog/resume" class="nav__link">Expériences</a>
              </li>
              
              
              
              
              
              
              
              <li class="nav__item">
                
                <a href="/blog/competences.html" class="nav__link">compétences et formations</a>
                
              </li>
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
              
            </ul>
          </div>
        </nav>

        <div class="nav-buttons">
          <i class="nav__icon nav__icon-menu ion ion-md-menu" aria-label="Menu Icon"></i>
          <i class="nav__icon nav__icon-search ion ion-md-search" aria-label="Search Icon"></i>


<i class="nav__icon nav__icon-flag ion en" aria-label="Lang fr"
    onclick="window.location = '/blog/en//2021/03/31/deploiement-prometheus-grafana-kubernetes/'"></i>





        </div>

        <div class="header__overlay"></div>
      </header>
      <!-- end header -->
    </div>
  </div>
</div>

  <!-- begin content -->
  <main class="content" aria-label="Content">
    <div class="container">
  <div class="post-title-box">
    <div class="row">
      <div class="col col-10 push-2 col-11 push-t-1 col-m-12 push-m-0">
        <span class="post__date">
          <time datetime="2021-03-31T00:00:00+00:00">Mar 31, 2021</time>
        </span>

        <h1 class="post-title">Deploiement de la suite prometheus grafana sous Kubernetes</h1>

        <div class="post__info">
          <div class="post__author">
            <span>Par</span>
            <a href="/blog/about/" class="author-name">Matthieu Petite</a>
          </div>

          
          <div class="post__tags">
            
            <a href="/blog/tag/kubernetes" class="post__tags-tag">kubernetes</a>
            
            <a href="/blog/tag/prometheus" class="post__tags-tag">prometheus</a>
            
            <a href="/blog/tag/grafana" class="post__tags-tag">grafana</a>
            
            <a href="/blog/tag/k3d" class="post__tags-tag">k3d</a>
            
            <a href="/blog/tag/helm" class="post__tags-tag">helm</a>
            
          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  
  <div class="post__head">
    <div class="post-image" style="background-image: url(/blog//images/post/2021/03/2021-03-31-deploiement-prometheus-grafana-kubernetes.png)"></div>
  </div>
  

</div>


<div class="container">
  <div class="row">
    <!-- begin post -->
    <article class="post  col col-8 col-t-10 col-m-12">

      <div class="post__content">
        <p>Superviser le cloud est un enjeu majeur lorsque l’on décide d’y déployer une application métier. En effet, quel intérêt de bénéficier d’une disponibilité de 5*9 au niveau de l’infrastructure si la couche applicative n’est pas surveillée et n’offre pas le même niveau de continuité de service. À l’heure où les architectures IT sont évolutives, où les principes Dev/Ops de CI/CD se généralise, la DSI a besoin d’outils de supervision agiles et performants.  <a href="https://go2.grafana.com/prometheus-grafana.html">Prometheus</a>, <a href="https://go2.grafana.com/prometheus-grafana.html">Grafana</a> s imposent comme des outils essentiels pour répondre à ces enjeux pour fournir des services de monitoring et d’alerting. Voici comment les déployer dans un environnement Kubernetes.</p>

<h2 id="prometheus--grafana--architecture">Prometheus / Grafana : Architecture</h2>

<p>On parle souvent de Prométheus et Grafana, mais en réalité il s’agit d’une suite d’outillage plus complète comme le montre le diagramme d’architecture ci-dessous:</p>

<p><img src="/blog/images/post/2021/03/2021-03-31-deploiement-prometheus-grafana-kubernetes-1.png" alt="Prometheus Grafana architecture" /></p>

<p>Les éléments constitutifs de la plateforme sont donc:</p>

<ol>
  <li>Le prometheus serveur: qui collecte la donnée de supervision et les stocke</li>
  <li>La partie grafana qui assure la partie visualisation des données</li>
  <li>La partie PushGateway dont le rôle est d’assurer la collecte de données de supervision qui serait collectée en mode push (en effet le mode de supervision de prometheus est le pull par défaut)</li>
  <li>la partie Alert manager qui permet de diffuser les événements pour les équipes de supervision.</li>
  <li>Les nodes exporter, qui constitue la partie collecte des données en mode pull.</li>
</ol>

<p>On peut noter que pour le déploiement de cette chaine de supervision dans une réel environnement de production il convient souvent d’ajouter les composants suivants:</p>

<ol>
  <li><a href="https://geekflare.com/fr/monitor-website-with-blackbox-prometheus-grafana/">Blackbox</a>: pour la supervision des performances de site web</li>
  <li><a href="https://thanos.io/">Thanos</a>: pour la gestion avancée du stockage à long terme</li>
</ol>

<h2 id="objectifs-du-tutoriel">Objectifs du tutoriel</h2>

<p>Dans ce tutoriel nous allons installer la suite prometheus grafana sur un cluster Kubernetes afin de monitorer les performances de celui-ci. Nous allons pour réaliser ces travaux produire un Chart Helm qui nous donnera la possibilité d’ajouter nos propres tableaux de bord Grafana.</p>

<h2 id="prérequis">Prérequis</h2>

<p>Vous devez avoir accès à un cluster Kubernetes sur votre poste de développement. Dans le cadre de cet article nous allons utiliser K3d, mais vous pouvez de même utiliser <a href="https://kind.sigs.k8s.io/">Kind</a> ou <a href="https://kubernetes.io/fr/docs/setup/learning-environment/minikube/">Minikube</a>.</p>

<p>Vous devez aussi avoir les connaissances de base autour de la création de <a href="https://helm.sh">Chart Helm</a>.</p>

<h2 id="création-du-cluster-k3d">Création du cluster k3d</h2>

<p>Après avoir installé l’outil k3d en suivant la <a href="https://k3d.io">procédure d’installation</a>, vérifiez la bonne installation de l’outil en lançant la commande suivante:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>k3d <span class="nt">--version</span>
</code></pre></div></div>

<p>Vous devez obtenir le résultat suivant:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>k3d version v3.2.0
k3s version v1.18.9-k3s1 <span class="o">(</span>default<span class="o">)</span>
</code></pre></div></div>

<p>Créer votre premier cluster en lançant la commande</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>k3d cluster create mycluster <span class="nt">-p</span> <span class="s2">"80:80@loadbalancer"</span> <span class="nt">--agents</span> 2
</code></pre></div></div>

<p>Noter le paramètre <code class="highlighter-rouge">-p "80:80@loadbalancer"</code>  qui permettra d’exposer votre ingress controller</p>

<h2 id="création-du-chart-à-partir-dun-modèle-et-clean-du-code">Création du chart à partir d’un modèle et clean du code</h2>

<p>Dans un terminal, lancer la commande suivante:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm3 create prometheus
</code></pre></div></div>

<p>Vous devez obtenir l’arborescence suivante, qui correspond à un chart de base:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>📦prometheus
 ┣ 📂charts
 ┣ 📂templates
 ┃ ┣ 📂tests
 ┃ ┃ ┗ 📜test-connection.yaml
 ┃ ┣ 📜NOTES.txt
 ┃ ┣ 📜_helpers.tpl
 ┃ ┣ 📜deployment.yaml
 ┃ ┣ 📜hpa.yaml
 ┃ ┣ 📜ingress.yaml
 ┃ ┣ 📜service.yaml
 ┃ ┗ 📜serviceaccount.yaml
 ┣ 📜.helmignore
 ┣ 📜Chart.yaml
 ┗ 📜values.yaml
</code></pre></div></div>

<p>Supprimer les fichiers inutiles, car nous n’avons pas besoin de déployment, hpa, ingress, service ou encore service account ou encore des tests. Par contre nous avons besoin de configmaps et d’un dossier dashboard à la racine du chart. Après l’étape de nettoyage, notre chart correspond à ceci:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>📦prometheus
 ┣ 📂charts
 ┣ 📂dashboards
 ┣ 📂templates
 ┃ ┗ 📂configmap
 ┣ 📜.helmignore
 ┣ 📜Chart.yaml
 ┗ 📜values.yaml
</code></pre></div></div>

<h2 id="spécialisation-du-chart">Spécialisation du chart</h2>

<h3 id="modification-du-fichier-chartyaml">Modification du fichier Chart.yaml</h3>

<p>Notre chart va s’appuyer sur celui fournit par la communauté : <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> qui de façon sous-jacente installe plusieurs opérateurs Kubernetes.</p>

<p>Afin de configurer cette dépendance, il convient donc de modifier le fichier <code class="highlighter-rouge">chart.yaml</code> comme suit:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v2</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">prometheus</span>
<span class="na">description</span><span class="pi">:</span> <span class="s">A Helm chart for Kubernetes</span>

<span class="c1"># A chart can be either an 'application' or a 'library' chart.</span>
<span class="c1">#</span>
<span class="c1"># Application charts are a collection of templates that can be packaged into versioned archives</span>
<span class="c1"># to be deployed.</span>
<span class="c1">#</span>
<span class="c1"># Library charts provide useful utilities or functions for the chart developer. They're included as</span>
<span class="c1"># a dependency of application charts to inject those utilities and functions into the rendering</span>
<span class="c1"># pipeline. Library charts do not define any templates and therefore cannot be deployed.</span>
<span class="na">type</span><span class="pi">:</span> <span class="s">application</span>

<span class="c1"># This is the chart version. This version number should be incremented each time you make changes</span>
<span class="c1"># to the chart and its templates, including the app version.</span>
<span class="c1"># Versions are expected to follow Semantic Versioning (https://semver.org/)</span>
<span class="na">version</span><span class="pi">:</span> <span class="s">0.1.0</span>

<span class="c1"># This is the version number of the application being deployed. This version number should be</span>
<span class="c1"># incremented each time you make changes to the application. Versions are not expected to</span>
<span class="c1"># follow Semantic Versioning. They should reflect the version the application is using.</span>
<span class="c1"># It is recommended to use it with quotes.</span>
<span class="na">appVersion</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1.16.0"</span>

<span class="na">dependencies</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">kube-prometheus-stack</span>
    <span class="na">version</span><span class="pi">:</span> <span class="s">14.4.0</span>
    <span class="na">repository</span><span class="pi">:</span> <span class="s">https://prometheus-community.github.io/helm-charts</span>
    <span class="na">import-values</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">child</span><span class="pi">:</span> <span class="s">grafana</span>
        <span class="na">parent</span><span class="pi">:</span> <span class="s">grafana</span>
</code></pre></div></div>

<h3 id="modication-du-fichier-valuesyaml">Modication du fichier values.yaml</h3>

<p>Le fichier de values doit être modifié comme suit:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">kube-prometheus-stack</span><span class="pi">:</span>
    <span class="c1">## Provide a name in place of kube-prometheus-stack for `app:` labels</span>
    <span class="c1">##</span>
    <span class="na">nameOverride</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

    <span class="c1">## Override the deployment namespace</span>
    <span class="c1">##</span>
    <span class="na">namespaceOverride</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

    <span class="c1">## Provide a k8s version to auto dashboard import script example: kubeTargetVersionOverride: 1.16.6</span>
    <span class="c1">##</span>
    <span class="na">kubeTargetVersionOverride</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

    <span class="c1">## Provide a name to substitute for the full names of resources</span>
    <span class="c1">##</span>
    <span class="na">fullnameOverride</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

    <span class="c1">## Component scraping the kube controller manager</span>
    <span class="na">kubeControllerManager</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1">## Component scraping etcd</span>
    <span class="na">kubeEtcd</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1">## Component scraping kube proxy</span>
    <span class="na">kubeProxy</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1">## Component scraping kube scheduler</span>
    <span class="na">kubeScheduler</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">false</span>

    <span class="c1">## Configuration for alertmanager</span>
    <span class="c1">## ref: https://prometheus.io/docs/alerting/alertmanager/</span>
    <span class="c1">##</span>
    <span class="na">alertmanager</span><span class="pi">:</span>
      <span class="na">alertmanagerSpec</span><span class="pi">:</span>
        <span class="na">image</span><span class="pi">:</span>
          <span class="na">repository</span><span class="pi">:</span> <span class="s">quay.io/prometheus/alertmanager</span>
          <span class="na">tag</span><span class="pi">:</span> <span class="s">latest</span>
          <span class="na">sha</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>  
    
    <span class="na">ingress</span><span class="pi">:</span>
    <span class="c1">## If true, Grafana Ingress will be created</span>
    <span class="c1">##</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>

    <span class="c1">## Annotations for Grafana Ingress</span>
    <span class="c1">##</span>
      <span class="na">annotations</span><span class="pi">:</span> 
      <span class="na">kubernetes.io/ingress.class</span><span class="pi">:</span> <span class="s">nginx</span>
      <span class="c1"># kubernetes.io/tls-acme: "true"</span>

    <span class="c1">## Labels to be added to the Ingress</span>
    <span class="c1">##</span>
      <span class="na">labels</span><span class="pi">:</span> <span class="pi">{}</span>

    <span class="c1">## Hostnames.</span>
    <span class="c1">## Must be provided if Ingress is enable.</span>
    <span class="c1">##</span>
    <span class="c1"># hosts:</span>
    <span class="c1">#   - grafana.domain.com</span>
      <span class="na">hosts</span><span class="pi">:</span> 
      <span class="pi">-</span> <span class="s">dev-platform</span>

    <span class="c1">## Path for grafana ingress</span>
      <span class="na">path</span><span class="pi">:</span> <span class="s">/grafana/</span>  
    
    <span class="c1">## Manages Prometheus and Alertmanager components</span>
    <span class="c1">##</span>
    <span class="na">prometheusOperator</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">admissionWebhooks</span><span class="pi">:</span>
        <span class="na">failurePolicy</span><span class="pi">:</span> <span class="s">Fail</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">patch</span><span class="pi">:</span>
          <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
          <span class="na">image</span><span class="pi">:</span>
            <span class="na">repository</span><span class="pi">:</span> <span class="s">jettech/kube-webhook-certgen</span>
            <span class="na">tag</span><span class="pi">:</span> <span class="s">v1.5.1</span>
            <span class="na">sha</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
            <span class="na">pullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
          <span class="na">resources</span><span class="pi">:</span> <span class="pi">{}</span>
      <span class="c1">## Prometheus-operator image</span>
      <span class="c1">##</span>
      <span class="na">image</span><span class="pi">:</span>
        <span class="na">repository</span><span class="pi">:</span> <span class="s">quay.io/prometheus-operator/prometheus-operator</span>
        <span class="na">tag</span><span class="pi">:</span> <span class="s">v0.46.0</span>
        <span class="na">sha</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
        <span class="na">pullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>

      <span class="na">prometheusConfigReloaderImage</span><span class="pi">:</span>
        <span class="na">repository</span><span class="pi">:</span> <span class="s">quay.io/prometheus-operator/prometheus-config-reloader</span>
        <span class="na">tag</span><span class="pi">:</span> <span class="s">v0.46.0</span>
        <span class="na">sha</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>

    <span class="na">prometheus</span><span class="pi">:</span>
      <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
      <span class="c1">## Configuration for Prometheus service</span>
      <span class="c1">##</span>
      <span class="na">service</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">LoadBalancer</span>
      <span class="na">prometheusSpec</span><span class="pi">:</span>
        <span class="na">image</span><span class="pi">:</span>
          <span class="na">repository</span><span class="pi">:</span> <span class="s">quay.io/prometheus/prometheus</span>
          <span class="na">tag</span><span class="pi">:</span> <span class="s">v2.24.0</span>
          <span class="na">sha</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
        <span class="c1">## External URL at which Prometheus will be reachable.</span>
        <span class="c1">##</span>
        <span class="na">externalUrl</span><span class="pi">:</span> <span class="s2">"</span><span class="s">http://kind-dev/prometheus"</span>
        <span class="c1">## Prefix used to register routes, overriding externalUrl route.</span>
        <span class="c1">## Useful for proxies that rewrite URLs.</span>
        <span class="c1">##</span>
        <span class="na">routePrefix</span><span class="pi">:</span> <span class="s">/prometheus</span>
    <span class="na">grafana</span><span class="pi">:</span>
      <span class="na">adminPassword</span><span class="pi">:</span> <span class="s2">"</span><span class="s">password"</span>
      <span class="na">grafana.ini</span><span class="pi">:</span>
        <span class="na">server</span><span class="pi">:</span>
          <span class="na">domain</span><span class="pi">:</span> <span class="s">cluster-dev.local</span>
          <span class="na">root_url</span><span class="pi">:</span> <span class="s2">"</span><span class="s">%(protocol)s://%(domain)s:%(http_port)s/grafana"</span>
          <span class="na">serve_from_sub_path</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">image</span><span class="pi">:</span>
        <span class="na">repository</span><span class="pi">:</span> <span class="s">grafana/grafana</span>

      <span class="na">downloadDashboardsImage</span><span class="pi">:</span>
        <span class="na">repository</span><span class="pi">:</span> <span class="s">curlimages/curl</span>

      <span class="na">initChownData</span><span class="pi">:</span>
        <span class="na">image</span><span class="pi">:</span>
          <span class="na">repository</span><span class="pi">:</span> <span class="s">busybox</span>

      <span class="na">sidecar</span><span class="pi">:</span>
        <span class="na">image</span><span class="pi">:</span>
          <span class="na">repository</span><span class="pi">:</span> <span class="s">kiwigrid/k8s-sidecar</span>
      <span class="na">ingress</span><span class="pi">:</span>
        <span class="c1">## If true, Grafana Ingress will be created</span>
        <span class="c1">##</span>
        <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>

        <span class="c1">## Annotations for Grafana Ingress</span>
        <span class="c1">##</span>
        <span class="c1">#annotations: {</span>
        <span class="c1">#  kubernetes.io/ingress.class: nginx,:qa:pod</span>
        <span class="c1">#  kubernetes.io/tls-acme: "false"</span>
        <span class="c1">#}</span>

        <span class="c1">## Labels to be added to the Ingress</span>
        <span class="c1">##</span>
        <span class="na">labels</span><span class="pi">:</span> <span class="pi">{}</span>

        <span class="c1">## Hostnames.</span>
        <span class="c1">## Must be provided if Ingress is enable.</span>
        <span class="c1">##</span>
        <span class="c1"># hosts:</span>
        <span class="c1">#   - grafana.domain.com</span>
        <span class="na">hosts</span><span class="pi">:</span> 
          <span class="pi">-</span> <span class="s">grafana.cluster-dev.local</span>

        <span class="c1">## Path for grafana ingress</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s">/grafana</span>

        <span class="c1">## TLS configuration for grafana Ingress</span>
        <span class="c1">## Secret must be manually created in the namespace</span>
        <span class="c1">##</span>
        <span class="na">tls</span><span class="pi">:</span> <span class="pi">[]</span>
        <span class="c1"># - secretName: grafana-general-tls</span>
        <span class="c1">#   hosts:</span>
        <span class="c1">#   - grafana.example.com</span>

    <span class="na">kube-state-metrics</span><span class="pi">:</span>
      <span class="na">image</span><span class="pi">:</span>
        <span class="na">repository</span><span class="pi">:</span> <span class="s">quay.io/coreos/kube-state-metrics</span>

    <span class="na">prometheus-node-exporter</span><span class="pi">:</span>
      <span class="na">image</span><span class="pi">:</span>
        <span class="na">repository</span><span class="pi">:</span> <span class="s">quay.io/prometheus/node-exporter</span>
</code></pre></div></div>

<p>Notez la valeur <code class="highlighter-rouge">grafana.cluster-dev.local</code> que nous avons positionnée de façon a créer des ingress pour accéder à grafana.</p>

<h3 id="modification-du-fichier-de-configuration-map-afin-dajouter-les-dashboard-grafana-custom">Modification du fichier de configuration map afin d’ajouter les dashboard grafana custom</h3>

<p>Dans le dossier <code class="highlighter-rouge">/template/configmap/</code> de votre chart, veuillez ajouter un fichier yaml pour créer une configmap de configuration des dashboard custom. Le contenu de ce dernier doit être comme suit:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="pi">{{</span><span class="nv">- $files</span> <span class="pi">:</span><span class="nv">= .Files.Glob "dashboards/*.json"</span> <span class="pi">}}</span>
<span class="pi">{{</span><span class="nv">- if $files</span> <span class="pi">}}</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMapList</span>
<span class="na">items</span><span class="pi">:</span>
<span class="pi">{{</span><span class="nv">- range $path</span><span class="pi">,</span> <span class="nv">$fileContents</span> <span class="pi">:</span><span class="nv">= $files</span> <span class="pi">}}</span>
<span class="pi">{{</span><span class="nv">- $dashboardName</span> <span class="pi">:</span><span class="nv">= regexReplaceAll "(^.*/)(.*)\\.json$" $path "$</span><span class="pi">{</span><span class="nv">2</span><span class="pi">}</span><span class="s2">"</span><span class="nv"> </span><span class="s">}}</span>
<span class="s">-</span><span class="nv"> </span><span class="s">apiVersion:</span><span class="nv"> </span><span class="s">v1</span>
  <span class="s">kind:</span><span class="nv"> </span><span class="s">ConfigMap</span>
  <span class="s">metadata:</span>
    <span class="s">name:</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">printf</span><span class="nv"> </span><span class="s">"</span><span class="err">%</span><span class="nv">s-%s" (include "prometheus.fullname" $) $dashboardName | trunc 63 | trimSuffix "-"</span> <span class="pi">}}</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="pi">{{</span> <span class="nv">$.Release.Namespace</span> <span class="pi">}}</span>
    <span class="na">labels</span><span class="pi">:</span>
      <span class="pi">{{</span><span class="nv">- if $.Values.grafana.sidecar.dashboards.label</span> <span class="pi">}}</span>
      <span class="pi">{{</span> <span class="nv">$.Values.grafana.sidecar.dashboards.label</span> <span class="pi">}}</span><span class="err">:</span> <span class="s2">"</span><span class="s">1"</span>
      <span class="pi">{{</span><span class="nv">- end</span> <span class="pi">}}</span>
      <span class="na">app</span><span class="pi">:</span> <span class="pi">{{</span> <span class="nv">template "prometheus.name" $</span> <span class="pi">}}</span><span class="s">-grafana</span>
<span class="pi">{{</span> <span class="nv">include "prometheus.labels" $ | indent 6</span> <span class="pi">}}</span>
  <span class="na">data</span><span class="pi">:</span>
    <span class="pi">{{</span> <span class="nv">$dashboardName</span> <span class="pi">}}</span><span class="na">.json</span><span class="pi">:</span> <span class="pi">{{</span> <span class="nv">$.Files.Get $path | toJson</span> <span class="pi">}}</span>
<span class="pi">{{</span><span class="nv">- end</span> <span class="pi">}}</span>
<span class="pi">{{</span><span class="nv">- end</span> <span class="pi">}}</span>

</code></pre></div></div>

<p>Comme vous pouvez le constater, cette configuration map est créée en parcourant la liste des fichiers json contenus dans le chart lui-même. C’est pour cela que nous avons mis en place un dossier dashboards dans notre chart qui contiendra les fichiers json de définition des tableaux de bord custom. Vous pouvez trouver une liste d’exemple à l’adresse suivante: <a href="https://grafana.com/grafana/dashboards">https://grafana.com/grafana/dashboards</a></p>

<h2 id="déploiement-de-notre-chart">Déploiement de notre chart</h2>

<h3 id="installation-de-notre-chart">installation de notre chart</h3>

<p>Pour installer votre chart lancer la commande suivante:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>helm <span class="nb">install</span> <span class="nt">-n</span> prometheus prometheus ./prometheus/ <span class="nt">--create-namespace</span>
</code></pre></div></div>

<p>Lancez votre outil de gestion de Kubernetes préféré pour constater la liste des pods qui ont été créés (ici nous utilisons k9s):</p>

<p><img src="/blog/images/post/2021/03/2021-03-31-deploiement-prometheus-grafana-kubernetes-2.png" alt="liste de pods prometheus et grafana" /></p>

<h2 id="configuration-de-votre-dns">configuration de votre DNS</h2>

<p>Afin d’accédé à votre portail grafana il faut que vous modifier votre fichier <code class="highlighter-rouge">/etc/hosts</code> afin d’y ajouter une entrée pour le host suivant <code class="highlighter-rouge">grafana.cluster-dev.local</code>. En effet, le service grafana est diffusé par défaut au travers d’un <a href="https://kubernetes.github.io/ingress-nginx/">ingress controller</a> et d’un ingress. Il faut donc que votre domaine soit connu sur votre machine hôte.</p>

<p>Ajoutez donc l’entrée suivante dans votre fichier /etc/hosts</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>127.0.0.1 grafana.cluster-dev.local
</code></pre></div></div>

<p>Il vous suffit ensuite de vous connecter sur l’URL suivante <a href="http://grafana.cluster-dev.local/grafana">http://grafana.cluster-dev.local/grafana</a> pour avoir accès à la mire de connexion grafana.</p>

<p><img src="/blog/images/post/2021/03/2021-03-31-deploiement-prometheus-grafana-kubernetes-3.png" alt="portail grafana" /></p>

<p>Entrez le login suivant <code class="highlighter-rouge">admin</code> et le mot de passe <code class="highlighter-rouge">password</code> pour vous connecter à grafana. Vous aurez ensuite dans la partie manage accès à la liste de vos tableaux de bord.</p>

<p><img src="/blog/images/post/2021/03/2021-03-31-deploiement-prometheus-grafana-kubernetes-4.png" alt="dashboard grafana" /></p>

<p>Pour avoir accès au code source de cet exemple, c’est par ici <a href="https://github.com/matthieupetite/helm-samples">https://github.com/matthieupetite/helm-samples</a></p>

      </div>
      
      
      <div class="post__share">
        <span class="share__title">Partager cet article</span>
        <ul class="share__list list-reset">
          <li class="share__item">
            <a class="share__facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://matthieupetite.github.io//blog/2021/03/31/deploiement-prometheus-grafana-kubernetes/"
              onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
              title="Share on Facebook" rel="nofollow"><i class="ion ion-logo-facebook"></i></a>
          </li>

          <li class="share__item">
            <a class="share__twitter"
              href="https://twitter.com/intent/tweet?text=Deploiement%20de%20la%20suite%20prometheus%20grafana%20sous%20Kubernetes&url=https://matthieupetite.github.io//blog/2021/03/31/deploiement-prometheus-grafana-kubernetes/"
              onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
              title="Share on Twitter" rel="nofollow"><i class="ion ion-logo-twitter"></i></a>
          </li>
          <li class="share__item">
            <a class="share__linkedin"
              href="https://www.linkedin.com/shareArticle?mini=true&url=https://matthieupetite.github.io//blog/2021/03/31/deploiement-prometheus-grafana-kubernetes/&title=Deploiement%20de%20la%20suite%20prometheus%20grafana%20sous%20Kubernetes&summary=&source="
              onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
              title="Share on LinkedIn" rel="nofollow"><i class="ion ion-logo-linkedin"></i></a>
          </li>
        </ul>
      </div>
    </article>
    <!-- end post -->
  </div>
</div>

<div class="container">
  <div class="post__navigation">
    
    <div class="prev">
      <a class="post__nav__image" href="/blog/2020/03/30/installation-kafka-avec-l-operateur-strimzi-kubernetes/"
        style="background-image: url(/blog//images//post/2020/03/2020-03-30-installation-kafka-strimzi-kubernetes.png)"></a>
      <h2 class="post__nav__title">
        <i class="ion ion-md-arrow-back"></i>
        <a href="/blog/2020/03/30/installation-kafka-avec-l-operateur-strimzi-kubernetes/">Installation de Kafka avec l opérateur Strimzi sur Kubernetes</a>
      </h2>
      <p class="prev__excerpt">
        
        Dans cet article nous allons détailler l’installation de l’application Kafka a l’aide de l’opérateur Strimz...
        
      </p>
    </div>
    

    
    <div class="next">
      <a class="post__nav__image" href="/blog/2021/04/06/creer-un-site-avec-jekyll-et-github/"
        style="background-image: url(/blog//images/post/2021/04/2021-04-06-creer-un-site-avec-jekyll-et-github.png)">
      </a>
      <h2 class="post__nav__title">
        <a href="/blog/2021/04/06/creer-un-site-avec-jekyll-et-github/">créer un site avec Jekyll et GitHub</a>
        <i class="ion ion-md-arrow-forward"></i>
      </h2>
      <p class="next__excerpt">
        
        La documentation n'est pas notre point fort il faut bien l'admettre dans notre petit monde l'IT. Mais qui n...
        
      </p>
    </div>
    
  </div>

  
</div>
  </main>
  <!-- end content -->

  <div class="top ion ion-ios-arrow-up" title="Top"></div>

  <!-- begin search -->
<div class="search">
  <div class="container">
    <div class="row">
      <div class="col col-12">
        <div class="search__box">
          <div class="search__group">
            <div class="search__close">
              <i class="ion ion-ios-close-circle-outline"></i>
            </div>
            <label for="js-search-input" class="screen-reader-text">Rechercher</label>
            <input type="text" id="js-search-input" class="search__text" autocomplete="off" placeholder="Type to search">
          </div>
          <ul id="js-results-container" class="search-results-list"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end search -->

  <!-- begin footer -->
<footer class="footer">
  <div class="container">

     

    
    
    

    <div class="contact">
  <ul class="contact__list list-reset">
    
      <li><a href="https://twitter.com/matthieu_petite"><i class="ion ion-logo-twitter"></i></a></li>
    

    
      <li><a href="https://facebook.com/matthieu.petite"><i class="ion ion-logo-facebook"></i></a></li>
    
  
    
      <li><a href="https://github.com/matthieupetite/"><i class="ion ion-logo-github "></i></a></li>
    
  
    
      <li><a href="https://www.instagram.com/m4oppia/"><i class="ion ion-logo-instagram"></i></a></li>
    
  
     
  </ul>
</div>

    <div class="copyright">Copyright &copy; 2024 <a href="/">Matthieu Petite</a> — All right Reserved. Powered by <a href="https://jekyllrb.com/">Jekyll</a>.</div>
</div>
</footer>
<!-- end footer -->


  <script src="/blog/js/vendors/jquery-3.3.1.min.js"></script>
<script src="/blog/js/vendors/simple-jekyll-search.min.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById("js-search-input"),
    resultsContainer: document.getElementById("js-results-container"),
    json: "/blog/search.json",
    searchResultTemplate: '<li class="search-results__item"><a class="search-results__link" href="{url}">{title}</a><br> <span class="search-results__date">{date}</span></li>',
    noResultsText: '<li class="no-results">No results found</li>'
  });
</script>
<script src="/blog/js/vendors/transition.js"></script>
<script src="/blog/js/vendors/zoom.min.js"></script>
<script src="/blog/js/vendors/instafeed.min.js"></script>
<script src="/blog/js/vendors/jquery.fitvids.js"></script>
<script src="/blog/js/common.js"></script>
</body>

</html>